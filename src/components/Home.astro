---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import PostList from "./PostList.astro";
import TagList from "./TagList.astro";
import H1 from "./H1.astro";
import HomeParallax from "./HomeParallax";
const allPosts = await getCollection("posts");
const allTags: string[] = allPosts.reduce((acc, post) => {
    post.data.tags.forEach(
        (tag) => !acc.includes(tag as never) && acc.push(tag as never),
    );
    return acc;
}, []);
const featuredposts = allPosts.filter((post) => post.data.featured);
---

<HomeParallax client:load posts={allPosts} />

<div
    id="mainTags"
    class="relative pt-[200svh] md:-mt-[1100px] md:pt-[0px] flex flex-col items-center gap-4"
>
    <H1
        className="text-center"
        text="Find posts from wide range of categories"
    />
    <TagList tags={[...allTags, ...allTags, ...allTags]} justifyCenter />
</div>
<div class="relative">
    <H1 text="Featured Posts:" />
    <PostList posts={featuredposts} />
</div>
