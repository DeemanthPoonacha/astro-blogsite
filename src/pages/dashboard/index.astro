---
import H1 from "@/components/H1.astro";
import Layout from "@/layouts/Layout.astro";
import Main from "@/layouts/Main.astro";
import BlogDashboard from "@/components/BlogDahboard";

const user = await Astro.locals.currentUser();
console.log("ðŸš€ ~ user:", user);
const previewId = Astro.url.searchParams.get("previewId");
const editingId = Astro.url.searchParams.get("editingId");
console.log("ðŸš€ ~ previewId:", previewId);
---

<Layout title="Dashboard | Bloggy">
    <Main className="w-full">
        <H1 text="Dashboard" />
        {
            !previewId ? (
                <BlogDashboard
                    client:load
                    user={user}
                    defaultEditingId={editingId}
                />
            ) : (
                <a href={`?editingId=${previewId}`}>{previewId}</a>
            )
        }
    </Main>
</Layout>
